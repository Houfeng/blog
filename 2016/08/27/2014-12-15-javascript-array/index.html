<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Houfeng"><meta name="description" content="概述Array是JavaScript的内置对象，同时也是一个构造函数，可以用它生成新的数组。作为构造函数时，Array可以接受参数，但是不同的参数，会使得Array产生不同的行为。"><meta name="keywords" content=""><title>JavaScript 之 “Array对象” · Houfeng's Blog</title><link rel="icon" href="/favicon.ico"><link rel="canonical" href="http://blog.houfeng.net/2016/08/27/2014-12-15-javascript-array/"><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><link rel="stylesheet" href="/css/style.css"><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3F16290d6dfe4977c6ba2d32fb7a483731";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script></head><body><div id="main"><header><a href="/." class="logo">Houfeng's Blog</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li><li class="nav-link"><a href="/about/" target="_self">About</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">JavaScript 之 “Array对象”</h1><span class="post-time">Aug 27, 2016</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Contents</h3><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#概述"><span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Array对象的静态方法"><span class="toc-text">Array对象的静态方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#isArray方法"><span class="toc-text">isArray方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Array实例的方法"><span class="toc-text">Array实例的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#valueOf方法，toString方法"><span class="toc-text">valueOf方法，toString方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#push方法，pop方法"><span class="toc-text">push方法，pop方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#join方法，concat方法"><span class="toc-text">join方法，concat方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shift方法，unshift方法"><span class="toc-text">shift方法，unshift方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reverse方法"><span class="toc-text">reverse方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slice方法"><span class="toc-text">slice方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#splice"><span class="toc-text">splice()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sort"><span class="toc-text">sort()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ECMAScript-5-新加入的数组方法"><span class="toc-text">ECMAScript 5 新加入的数组方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#map方法，forEach方法"><span class="toc-text">map方法，forEach方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filter方法"><span class="toc-text">filter方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#some方法，every方法"><span class="toc-text">some方法，every方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reduce方法，reduceRight方法"><span class="toc-text">reduce方法，reduceRight方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#indexOf-和-lastIndexOf"><span class="toc-text">indexOf 和 lastIndexOf</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#链式使用"><span class="toc-text">链式使用</span></a></li></ol></li></ol></div><div class="post-content"><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Array是JavaScript的内置对象，同时也是一个构造函数，可以用它生成新的数组。</p>
<p>作为构造函数时，Array可以接受参数，但是不同的参数，会使得Array产生不同的行为。</p>
<a id="more"></a>
<ul>
<li><p>无参数时，返回一个空数组。</p>
</li>
<li><p>单个参数时，如果该参数是正整数，则这个正整数表示新数组的长度；如果该参数是非正整数（比如字符串、布尔值、对象等），则该值是新数组的成员。</p>
</li>
<li><p>多个参数时，这些参数都是新数组的成员。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a1 = <span class="keyword">new</span> <span class="built_in">Array</span>();</div><div class="line"><span class="keyword">var</span> a2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>);</div><div class="line"><span class="keyword">var</span> a3 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">'abc'</span>);</div><div class="line"><span class="keyword">var</span> a4 = <span class="keyword">new</span> <span class="built_in">Array</span>([<span class="number">1</span>]);</div><div class="line"><span class="keyword">var</span> a5 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>,<span class="number">2</span>);</div><div class="line"></div><div class="line">a1 <span class="comment">// []</span></div><div class="line">a2 <span class="comment">// [undefined × 1]</span></div><div class="line">a3 <span class="comment">// ['abc']</span></div><div class="line">a4 <span class="comment">// [Array[1]]</span></div><div class="line">a5 <span class="comment">// [1, 2]</span></div></pre></td></tr></table></figure>
<p>从上面代码可以看到，Array的构造函数行为很不一致。因此，不建议使用它生成新数组，直接使用数组的字面量是更好的方法。</p>
<h2 id="Array对象的静态方法"><a href="#Array对象的静态方法" class="headerlink" title="Array对象的静态方法"></a>Array对象的静态方法</h2><h3 id="isArray方法"><a href="#isArray方法" class="headerlink" title="isArray方法"></a>isArray方法</h3><p>Array.isArray方法用来判断一个值是否为数组。它可以弥补typeof运算符的不足。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"></div><div class="line"><span class="keyword">typeof</span> a <span class="comment">// "object"</span></div><div class="line"></div><div class="line"><span class="built_in">Array</span>.isArray(a) <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>上面代码表示，typeof运算符只能显示数组的类型是Object，而Array.isArray方法可以对数组返回true。</p>
<h2 id="Array实例的方法"><a href="#Array实例的方法" class="headerlink" title="Array实例的方法"></a>Array实例的方法</h2><p>以下这些Array实例对象的方法，都是数组实例才能使用。如果不想创建实例，只是想单纯调用这些方法，可以写成 [].method.call(调用对象，参数) 的形式，或者 Array.prototype.method.call(调用对象，参数)的形式。</p>
<h3 id="valueOf方法，toString方法"><a href="#valueOf方法，toString方法" class="headerlink" title="valueOf方法，toString方法"></a>valueOf方法，toString方法</h3><p>valueOf方法返回数组本身。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"></div><div class="line">a.valueOf()</div><div class="line"><span class="comment">// [1,2,3]</span></div></pre></td></tr></table></figure>
<p>toString 方法返回数组的字符串形式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"></div><div class="line">a.toString()</div><div class="line"><span class="comment">// "1,2,3"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]];</div><div class="line"></div><div class="line">a.toString()</div><div class="line"><span class="comment">// "1,2,3,4,5,6"</span></div></pre></td></tr></table></figure>
<h3 id="push方法，pop方法"><a href="#push方法，pop方法" class="headerlink" title="push方法，pop方法"></a>push方法，pop方法</h3><p>push方法用于在数组的末端添加一个或多个元素，并返回添加后的数组的长度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [];</div><div class="line"></div><div class="line">a.push(<span class="number">1</span>) <span class="comment">// 1</span></div><div class="line">a.push(<span class="string">"a"</span>) <span class="comment">// 2</span></div><div class="line">a.push(<span class="literal">true</span>, &#123;&#125;) <span class="comment">// 4</span></div><div class="line">a <span class="comment">// [1, "a", true, &#123;&#125;]</span></div></pre></td></tr></table></figure>
<p>上面代码使用push方法，先后往数组中添加了四个成员。</p>
<p>如果需要合并两个数组，可以这样写。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="keyword">var</span> b = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.push.apply(a, b)</div><div class="line"><span class="comment">// 或者</span></div><div class="line">a.push.apply(a,b)</div><div class="line"></div><div class="line"><span class="comment">// 上面两种写法等同于</span></div><div class="line">a.push(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</div><div class="line"></div><div class="line">a</div><div class="line"><span class="comment">// [1, 2, 3, 4, 5, 6]</span></div></pre></td></tr></table></figure>
<p>push方法还可以用于向对象添加元素，添加后的对象变成“类似数组的”对象，即新加入元素的键对应数组的索引，并且对象有一个length属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = &#123; a: <span class="number">1</span> &#125;;</div><div class="line"></div><div class="line">[].push.call(a, <span class="number">2</span>);</div><div class="line">a</div><div class="line"><span class="comment">// &#123;a:1, 0:2, length: 1&#125;</span></div><div class="line"></div><div class="line">[].push.call(a, [<span class="number">3</span>]);</div><div class="line">a</div><div class="line"><span class="comment">// &#123;a:1, 0:2, 1:[3], length: 2&#125;</span></div></pre></td></tr></table></figure>
<p>pop方法用于删除数组的最后一个元素，并返回该元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line"></div><div class="line">a.pop() <span class="comment">// 'c'</span></div><div class="line">a <span class="comment">// ['a', 'b']</span></div></pre></td></tr></table></figure>
<p>对空数组使用pop方法，不会报错，而是返回undefined。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[].pop() <span class="comment">// undefined</span></div></pre></td></tr></table></figure>
<h3 id="join方法，concat方法"><a href="#join方法，concat方法" class="headerlink" title="join方法，concat方法"></a>join方法，concat方法</h3><p>join方法以参数作为分隔符，将所有数组成员组成一个字符串返回。如果不提供参数，默认用逗号分隔。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</div><div class="line"></div><div class="line">a.join() <span class="comment">// "1,2,3,4"</span></div><div class="line">a.join(<span class="string">''</span>) <span class="comment">// '1234'</span></div><div class="line">a.join(<span class="string">"|"</span>) <span class="comment">// "1|2|3|4"</span></div></pre></td></tr></table></figure>
<p>通过函数的call方法，join方法（即Array.prototype.join）也可以用于字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.join.call(<span class="string">'hello'</span>, <span class="string">'-'</span>)</div><div class="line"><span class="comment">// "h-e-l-l-o"</span></div></pre></td></tr></table></figure>
<p>concat方法将新数组的成员，添加到原数组的尾部，然后返回一个新数组，常用于连接多个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="string">"hello"</span>].concat([<span class="string">"world"</span>])</div><div class="line"><span class="comment">// ["hello", "world"]</span></div><div class="line"></div><div class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].concat(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</div><div class="line"><span class="comment">// [1, 2, 3, 4, 5, 6]</span></div></pre></td></tr></table></figure>
<p>上面代码表明，concat方法的参数可以是一个或多个数组，以及原始类型的值。</p>
<p>如果不提供参数，concat方法返回当前数组的一个浅拷贝。所谓“浅拷贝”，指的是如果数组成员包括复合类型的值（比如对象），则新数组拷贝的是该值的引用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> o = &#123;a:<span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">var</span> oldArray = [o];</div><div class="line"></div><div class="line"><span class="keyword">var</span> newArray = oldArray.concat();</div><div class="line"></div><div class="line">o.a = <span class="number">2</span>;</div><div class="line">newArray[<span class="number">0</span>].a <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<p>上面代码中，原数组包含一个对象，concat方法生成的新数组包含这个对象的引用。所以，改变原对象以后，新数组跟着改变。事实上，只要原数组的成员中包含对象，concat方法不管有没有参数，总是返回该对象的引用。</p>
<p>concat方法也可以用于将对象合并为数组，但是必须借助call方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[].concat.call(&#123; a: <span class="number">1</span> &#125;, [<span class="number">2</span>])</div><div class="line"><span class="comment">// [&#123;a:1&#125;, 2]</span></div><div class="line"></div><div class="line"><span class="comment">// 等同于</span></div><div class="line"></div><div class="line">[<span class="number">2</span>].concat(&#123;a:<span class="number">1</span>&#125;)</div></pre></td></tr></table></figure>
<h3 id="shift方法，unshift方法"><a href="#shift方法，unshift方法" class="headerlink" title="shift方法，unshift方法"></a>shift方法，unshift方法</h3><p>shift方法用于删除数组的第一个元素，并返回该元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line"></div><div class="line">a.shift() <span class="comment">// 'a'</span></div><div class="line">a <span class="comment">// ['b', 'c']</span></div></pre></td></tr></table></figure>
<p>shift方法可以遍历并清空一个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>];</div><div class="line"></div><div class="line"><span class="keyword">var</span> item;</div><div class="line"></div><div class="line"><span class="keyword">while</span> (item = list.shift()) &#123;</div><div class="line">    <span class="built_in">console</span>.log(item);</div><div class="line">&#125;</div><div class="line"></div><div class="line">list <span class="comment">// []</span></div></pre></td></tr></table></figure>
<p>unshift方法用于在数组的第一个位置添加元素，并返回添加新元素后的数组长度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line"></div><div class="line">a.unshift(<span class="string">'x'</span>); <span class="comment">// 4</span></div><div class="line">a <span class="comment">// ['x', 'a', 'b', 'c']</span></div></pre></td></tr></table></figure>
<h3 id="reverse方法"><a href="#reverse方法" class="headerlink" title="reverse方法"></a>reverse方法</h3><p>reverse方法用于颠倒数组中元素的顺序，使用这个方法以后，返回改变后的原数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line"></div><div class="line">a.reverse() <span class="comment">// ["c", "b", "a"] </span></div><div class="line">a <span class="comment">// ["c", "b", "a"]</span></div></pre></td></tr></table></figure>
<h3 id="slice方法"><a href="#slice方法" class="headerlink" title="slice方法"></a>slice方法</h3><p>slice方法返回指定位置的数组成员组成的新数组，原数组不变。它的第一个参数为起始位置（从0开始），第二个参数为终止位置（但该位置的元素本身不包括在内）。如果省略第二个参数，则一直返回到原数组的最后一个成员。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>];</div><div class="line"></div><div class="line">a.slice(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">// ["b"]</span></div><div class="line">a.slice(<span class="number">1</span>) <span class="comment">// ["b", "c"]</span></div><div class="line">a.slice(<span class="number">0</span>) <span class="comment">// ["a","b","c"]</span></div><div class="line">a.slice(<span class="number">-2</span>) <span class="comment">// ["b", "c"]</span></div><div class="line">a.slice(<span class="number">4</span>) <span class="comment">// []</span></div><div class="line">a.slice(<span class="number">2</span>, <span class="number">6</span>) <span class="comment">// ["c"]</span></div><div class="line">a.slice(<span class="number">2</span>, <span class="number">1</span>) <span class="comment">// []</span></div></pre></td></tr></table></figure>
<p>上面代码表示，如果slice方法的参数是负数，则从尾部开始选择的成员个数；如果参数值大于数组成员的个数，或者第二个参数小于第一个参数，则返回空数组。</p>
<p>slice方法的一个重要应用，是将类似数组的对象转为真正的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.slice.call(&#123; <span class="number">0</span>: <span class="string">'a'</span>, <span class="number">1</span>: <span class="string">'b'</span>, length: <span class="number">2</span> &#125;)</div><div class="line"><span class="comment">// ['a', 'b']</span></div><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">"div"</span>));</div><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</div></pre></td></tr></table></figure>
<p>上面代码的参数都不是数组，但是通过call方法，在它们上面调用slice方法，就可以把它们转为真正的数组。</p>
<h3 id="splice"><a href="#splice" class="headerlink" title="splice()"></a>splice()</h3><p>splice方法用于删除元素，并可以在被删除的位置添加入新的数组元素。它的返回值是被删除的元素。需要特别注意的是，该方法会改变原数组。</p>
<p>splice的第一个参数是删除的起始位置，第二个参数是被删除的元素个数。如果后面还有更多的参数，则表示这些就是要被插入数组的新元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>,<span class="string">"f"</span>];</div><div class="line"></div><div class="line">a.splice(<span class="number">4</span>,<span class="number">2</span>)</div><div class="line"><span class="comment">// ["e", "f"]</span></div><div class="line"></div><div class="line">a</div><div class="line"><span class="comment">// ["a", "b", "c", "d"]</span></div></pre></td></tr></table></figure>
<p>上面代码从原数组位置4开始，删除了两个数组成员。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>,<span class="string">"f"</span>];</div><div class="line"></div><div class="line">a.splice(<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>)</div><div class="line"><span class="comment">// ["e", "f"]</span></div><div class="line"></div><div class="line">a</div><div class="line"><span class="comment">// ["a", "b", "c", "d", 1, 2]</span></div></pre></td></tr></table></figure>
<p>上面代码除了删除成员，还插入了两个新成员。</p>
<p>如果只是单纯地插入元素，splice方法的第二个参数可以设为0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>];</div><div class="line"></div><div class="line">a.splice(<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>)</div><div class="line"><span class="comment">// []</span></div><div class="line"></div><div class="line">a</div><div class="line"><span class="comment">// [1, 2, 1, 1]</span></div></pre></td></tr></table></figure>
<p>如果只提供第一个参数，则实际上等同于将原数组在指定位置拆分成两个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</div><div class="line"></div><div class="line">a.splice(<span class="number">2</span>)</div><div class="line"><span class="comment">// [3, 4]</span></div><div class="line"></div><div class="line">a</div><div class="line"><span class="comment">// [1, 2]</span></div></pre></td></tr></table></figure>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h3><p>sort方法对数组元素进行排序，默认是按照字典顺序排序。排序后，原数组将被改变。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="string">"d"</span>,<span class="string">"c"</span>,<span class="string">"b"</span>,<span class="string">"a"</span>].sort()</div><div class="line"><span class="comment">// ["a", "b", "c", "d"]</span></div><div class="line"></div><div class="line">[<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>].sort()</div><div class="line"><span class="comment">// [1, 2, 3, 4]</span></div><div class="line"></div><div class="line">[<span class="number">11</span>,<span class="number">101</span>].sort()</div><div class="line"><span class="comment">// [101, 11]</span></div><div class="line"></div><div class="line">[<span class="number">10111</span>,<span class="number">1101</span>,<span class="number">111</span>].sort()</div><div class="line"><span class="comment">// [10111, 1101, 111]</span></div></pre></td></tr></table></figure>
<p>上面代码的最后两个例子，需要特殊注意。sort方法不是按照大小排序，而是按照对应字符串的字典顺序排序，所以101排在11的前面。</p>
<p>如果想让sort方法按照大小排序，可以传入一个函数作为参数，表示按照自定义方法进行排序。该函数本身又接受两个参数，表示进行比较的两个元素。如果返回值大于0，表示第一个元素排在第二个元素后面；其他情况下，都是第一个元素排在第二个元素前面。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="number">10111</span>,<span class="number">1101</span>,<span class="number">111</span>].sort(<span class="function"><span class="keyword">function</span> (<span class="params">a,b</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> a-b;</div><div class="line">&#125;)</div><div class="line"><span class="comment">// [111, 1101, 10111]</span></div><div class="line"></div><div class="line">[</div><div class="line">  &#123; name: <span class="string">"张三"</span>, age: <span class="number">30</span> &#125;,</div><div class="line">  &#123; name: <span class="string">"李四"</span>, age: <span class="number">24</span> &#125;,</div><div class="line">  &#123; name: <span class="string">"王五"</span>, age: <span class="number">28</span>  &#125;</div><div class="line">].sort(<span class="function"><span class="keyword">function</span>(<span class="params">o1, o2</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> o1.age - o2.age;</div><div class="line">&#125;)</div><div class="line"><span class="comment">// [</span></div><div class="line"><span class="comment">//   &#123; name: "李四", age: 24 &#125;,</span></div><div class="line"><span class="comment">//   &#123; name: "王五", age: 28  &#125;,</span></div><div class="line"><span class="comment">//   &#123; name: "张三", age: 30 &#125;</span></div><div class="line"><span class="comment">// ]</span></div></pre></td></tr></table></figure>
<h2 id="ECMAScript-5-新加入的数组方法"><a href="#ECMAScript-5-新加入的数组方法" class="headerlink" title="ECMAScript 5 新加入的数组方法"></a>ECMAScript 5 新加入的数组方法</h2><p>ECMAScript 5新增了9个数组实例的方法，分别是map、forEach、filter、every、some、reduce、reduceRight、indexOf和lastIndexOf。其中，前7个与函数式（functional）操作有关。</p>
<p>这些方法可以在数组上使用，也可以在字符串和类似数组的对象上使用，这是它们不同于传统数组方法的一个地方。</p>
<p>在用法上，这些方法的参数是一个函数，这个作为参数的函数本身又接受三个参数：数组的当前元素elem、该元素的位置index和整个数组arr（详见下面的实例）。另外，上下文对象（context）可以作为第二个参数，传入forEach(), every(), some(), filter(), map()方法，用来绑定函数运行时的上下文。</p>
<p>对于不支持这些方法的老式浏览器（主要是IE 8及以下版本），可以使用函数库<a href="https://github.com/kriskowal/es5-shim" target="_blank" rel="external">es5-shim</a>，或者<a href="http://underscorejs.org/#filter" target="_blank" rel="external">Underscore</a>和<a href="http://lodash.com/docs#filter" target="_blank" rel="external">Lo-Dash</a>。</p>
<h3 id="map方法，forEach方法"><a href="#map方法，forEach方法" class="headerlink" title="map方法，forEach方法"></a>map方法，forEach方法</h3><p>map方法对数组的所有成员依次调用一个函数，根据函数结果返回一个新数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line"></div><div class="line">numbers.map(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123; <span class="keyword">return</span> n+<span class="number">1</span> &#125;);</div><div class="line"><span class="comment">// [2, 3, 4]</span></div><div class="line"></div><div class="line">numbers</div><div class="line"><span class="comment">// [1, 2, 3]</span></div></pre></td></tr></table></figure>
<p>上面代码中，原数组的成员都加上1，组成一个新数组返回，原数组没有变化。</p>
<p>只要数组的成员可以被索引到，map方法就不会跳过它。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123; <span class="keyword">return</span> n+<span class="number">1</span> &#125;;</div><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="literal">undefined</span>, <span class="number">2</span>].map(f) <span class="comment">// [2, NaN, 3]</span></div><div class="line">[<span class="number">1</span>, <span class="literal">null</span>, <span class="number">2</span>].map(f) <span class="comment">// [2, 1, 3]</span></div><div class="line">[<span class="number">1</span>, , <span class="number">2</span>].map(f) <span class="comment">// [2, undefined, 3]</span></div></pre></td></tr></table></figure>
<p>上面代码中，数组的成员分别是undefined、null和空位，map方法都不会跳过它们。</p>
<p>map方法的回调函数依次接受三个参数，分别是当前的数组成员、当前成员的位置和数组本身。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">elem, index, arr</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> elem * elem;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// [1, 4, 9]</span></div></pre></td></tr></table></figure>
<p>有时，我们需要对字符串的每个字符进行遍历。这时可以通过函数的call方法，将map方法用于字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> upper = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x.toUpperCase() &#125;;</div><div class="line"></div><div class="line">[].map.call(<span class="string">'abc'</span>, upper)</div><div class="line"><span class="comment">// [ 'A', 'B', 'C' ]</span></div><div class="line"></div><div class="line"><span class="comment">// 或者</span></div><div class="line"><span class="string">'abc'</span>.split(<span class="string">''</span>).map(upper)</div><div class="line"><span class="comment">// [ 'A', 'B', 'C' ]</span></div></pre></td></tr></table></figure>
<p>其他类似数组的对象（比如querySelectorAll方法返回DOM节点集合），也可以用上面的方法遍历。</p>
<p>map方法还可以接受第二个参数，表示回调函数执行时this所指向的对象。</p>
<p>数组实例的forEach方法与map方法很相似，也是遍历数组的所有成员，执行某种操作，但是forEach方法没有返回值。如果需要有返回值，一般使用map方法，如果只是单纯操作数据，一般使用forEach方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">element, index, array</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'['</span> + index + <span class="string">'] = '</span> + element);</div><div class="line">&#125;</div><div class="line"></div><div class="line">[<span class="number">2</span>, <span class="number">5</span>, , <span class="number">9</span>].forEach(log);</div><div class="line"><span class="comment">// [0] = 2</span></div><div class="line"><span class="comment">// [1] = 5</span></div><div class="line"><span class="comment">// [3] = 9</span></div></pre></td></tr></table></figure>
<p>从上面代码可以看到，forEach方法和map方法的参数格式是一样的，第一个参数都是一个函数。该函数接受三个参数，分别是当前元素、当前元素的位置（从0开始）、整个数组。</p>
<p>forEach方法会跳过数组的空位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> log = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123; <span class="built_in">console</span>.log(n + <span class="number">1</span>) &#125;;</div><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="literal">undefined</span>, <span class="number">2</span>].forEach(log)</div><div class="line"><span class="comment">// 2</span></div><div class="line"><span class="comment">// NaN</span></div><div class="line"><span class="comment">// 3</span></div><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="literal">null</span>, <span class="number">2</span>].forEach(log)</div><div class="line"><span class="comment">// 2</span></div><div class="line"><span class="comment">// 1</span></div><div class="line"><span class="comment">// 3</span></div><div class="line"></div><div class="line">[<span class="number">1</span>, , <span class="number">2</span>].map(f)</div><div class="line"><span class="comment">// 2</span></div><div class="line"><span class="comment">// 3</span></div></pre></td></tr></table></figure>
<p>上面代码中，forEach方法不会跳过undefined和null，但会跳过空位。</p>
<p>forEach方法也可以接受第二个参数，用来绑定回调函数的this关键字。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> out = [];</div><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">elem, index, arr</span>)</span>&#123;</div><div class="line">  <span class="keyword">this</span>.push(elem * elem);</div><div class="line">&#125;, out);</div><div class="line"></div><div class="line">out <span class="comment">// [1, 4, 9]</span></div></pre></td></tr></table></figure>
<p>上面代码表示，如果提供一个数组作为第二个参数，则函数内部的this关键字就指向这个数组。</p>
<h3 id="filter方法"><a href="#filter方法" class="headerlink" title="filter方法"></a>filter方法</h3><p>filter方法依次对所有数组成员调用一个测试函数，返回结果为true的成员组成一个新数组返回。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].filter(<span class="function"><span class="keyword">function</span> (<span class="params">elem</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> (elem &gt; <span class="number">3</span>);</div><div class="line">&#125;)</div><div class="line"><span class="comment">// [4,5]</span></div></pre></td></tr></table></figure>
<p>上面代码将大于3的原数组成员，作为一个新数组返回。</p>
<p>filter方法的测试函数可以接受三个参数，第一个参数是当前数组成员的值，这是必需的，后两个参数是可选的，分别是当前数组成员的位置和整个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem, index, arr</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> index % <span class="number">2</span> === <span class="number">0</span>;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// [1, 3, 5]</span></div></pre></td></tr></table></figure>
<p>上面代码返回原数组偶数位置的成员组成的新数组。</p>
<p>filter方法还可以接受第二个参数，指定测试函数所在的上下文对象（即this对象）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> Obj = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.MAX = <span class="number">3</span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> myFilter = <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (item &gt; <span class="keyword">this</span>.MAX) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>,<span class="number">8</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">9</span>];</div><div class="line">arr.filter(myFilter, <span class="keyword">new</span> Obj())</div><div class="line"><span class="comment">// [8, 4, 9]</span></div></pre></td></tr></table></figure>
<p>上面代码中，测试函数myFilter内部有this对象，它可以被filter方法的第二个参数绑定。</p>
<h3 id="some方法，every方法"><a href="#some方法，every方法" class="headerlink" title="some方法，every方法"></a>some方法，every方法</h3><p>这两个方法类似“断言”（assert），用来判断数组成员是否符合某种条件。</p>
<p>some方法对所有元素调用一个测试函数，只要有一个元素通过该测试，就返回true，否则返回false。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].some(<span class="function"><span class="keyword">function</span>(<span class="params">elem, index, arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> elem &gt;= <span class="number">3</span>;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// 返回true</span></div></pre></td></tr></table></figure>
<p>上面代码表示，如果存在大于等于3的数组成员，就返回true。</p>
<p>every方法对所有元素调用一个测试函数，只有所有元素通过该测试，才返回true，否则返回false。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].every(<span class="function"><span class="keyword">function</span>(<span class="params">elem, index, arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> elem &gt;= <span class="number">3</span>;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// 返回false</span></div></pre></td></tr></table></figure>
<p>上面代码表示，只有所有数组成员大于等于3，才返回true。</p>
<p>从上面的代码可以看到，some和every的使用方法与map和forEach是一致的，参数完全一模一样。也就是说，它们也可以使用第二个参数，用来绑定函数中的this关键字。</p>
<h3 id="reduce方法，reduceRight方法"><a href="#reduce方法，reduceRight方法" class="headerlink" title="reduce方法，reduceRight方法"></a>reduce方法，reduceRight方法</h3><p>reduce方法和reduceRight方法的作用，是依次处理数组的每个元素，最终累计为一个值。这两个方法的差别在于，reduce对数组元素的处理顺序是从左到右（从第一个成员到最后一个成员），reduceRight则是从右到左（从最后一个成员到第一个成员），其他地方完全一样。</p>
<p>reduce方法的第一个参数是一个处理函数。该函数接受四个参数，分别是：</p>
<ol>
<li>用来累计的变量（即当前状态），默认值为0</li>
<li>数组的当前元素</li>
<li>当前元素在数组中的序号（从0开始）</li>
<li>原数组</li>
</ol>
<p>这四个参数之中，只有前两个是必须的，后两个则是可选的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> x+y;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// 15</span></div></pre></td></tr></table></figure>
<p>上面代码的参数x表示累计变量，默认为0，y则是数组的当前元素。reduce方法依次将每个数组元素加入x，最终返回它们的总和15。</p>
<p>利用reduce方法，可以写一个数组求和的sum方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.sum = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">partial, value</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> partial + value;</div><div class="line">    &#125;)</div><div class="line">&#125;;</div><div class="line"></div><div class="line">[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">10</span>].sum()</div><div class="line"><span class="comment">// 28</span></div></pre></td></tr></table></figure>
<p>如果要对累计变量指定初值，可以把它放在reduce方法的第二个参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> x+y;</div><div class="line">&#125;, <span class="number">10</span>);</div><div class="line"><span class="comment">// 25</span></div></pre></td></tr></table></figure>
<p>上面代码指定参数x的初值为10，所以数组元素从10开始累加，最终结果为25。</p>
<p>由于reduce方法依次处理每个元素，所以实际上还可以用它来搜索某个元素。比如，下面代码是找出长度最长的数组元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">findLongest</span>(<span class="params">entries</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> entries.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">longest, entry</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> entry.length &gt; longest.length ? entry : longest;</div><div class="line">  &#125;, <span class="string">''</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="indexOf-和-lastIndexOf"><a href="#indexOf-和-lastIndexOf" class="headerlink" title="indexOf 和 lastIndexOf"></a>indexOf 和 lastIndexOf</h3><p>ECMAScript 5新增的9个方法之中，有2个与函数式编程无关，分别是indexOf和lastIndexOf。</p>
<p>indexOf方法返回给定元素在数组中第一次出现的位置，如果没有出现则返回-1。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>];</div><div class="line"></div><div class="line">a.indexOf(<span class="string">'b'</span>)</div><div class="line"><span class="comment">// 1</span></div><div class="line"></div><div class="line">a.indexOf(<span class="string">'y'</span>)</div><div class="line"><span class="comment">// -1</span></div></pre></td></tr></table></figure>
<p>indexOf方法还可以接受第二个参数，表示搜索的开始位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>].indexOf(<span class="string">'a'</span>, <span class="number">1</span>)</div><div class="line"><span class="comment">// -1</span></div></pre></td></tr></table></figure>
<p>上面代码从位置1开始搜索字符a，结果为-1，表示没有搜索到。</p>
<p>lastIndexOf方法返回给定元素在数组中最后一次出现的位置，如果没有出现则返回-1。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">2</span>];</div><div class="line"></div><div class="line">a.lastIndexOf(<span class="number">2</span>)</div><div class="line"><span class="comment">// 3</span></div><div class="line"></div><div class="line">a.lastIndexOf(<span class="number">7</span>)</div><div class="line"><span class="comment">// -1</span></div></pre></td></tr></table></figure>
<p>注意，如果数组中包含NaN，这两个方法不适用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>) <span class="comment">// -1</span></div><div class="line">[<span class="literal">NaN</span>].lastIndexOf(<span class="literal">NaN</span>) <span class="comment">// -1</span></div></pre></td></tr></table></figure>
<p>这是因为这两个方法内部，使用严格相等运算符（===）进行比较，而NaN是唯一一个不等于自身的值。</p>
<h3 id="链式使用"><a href="#链式使用" class="headerlink" title="链式使用"></a>链式使用</h3><p>上面这些数组方法之中，有不少返回的还是数组，所以可以链式使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> users = [&#123;name:<span class="string">"tom"</span>, email:<span class="string">"tom@example.com"</span>&#125;,</div><div class="line">			 &#123;name:<span class="string">"peter"</span>, email:<span class="string">"peter@example.com"</span>&#125;];</div><div class="line"></div><div class="line">users</div><div class="line">.map(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>)</span>&#123; <span class="keyword">return</span> user.email; &#125;)</div><div class="line">.filter(<span class="function"><span class="keyword">function</span> (<span class="params">email</span>) </span>&#123; <span class="keyword">return</span> <span class="regexp">/^t/</span>.test(email); &#125;)</div><div class="line">.forEach(alert);</div><div class="line"><span class="comment">// 弹出tom@example.com</span></div></pre></td></tr></table></figure></div></article><div class="tags"></div><div class="paginator"><a href="/2016/08/27/2014-07-15-javascript-math/" class="prev"><i class="iconfont icon-left"></i><span> Prev</span></a><a href="/2016/08/27/2015-03-15-javascript-wraper/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div><section id="comments"><div data-thread-key="http://blog.houfeng.net/2016/08/27/2014-12-15-javascript-array/index.html" data-title="JavaScript 之 “Array对象”" data-url="http://blog.houfeng.net/2016/08/27/2014-12-15-javascript-array/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "houfeng" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section></section><footer><div class="copyright"><p class="power">Powered by <a href="https://hexo.io/">Hexo</a> and Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p><p class="since">&copy;2009-2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Houfeng</span></p></div><label id="back2top"><i class="iconfont icon-up"></i></label></footer></div><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></body></html>