<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Houfeng"><link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16"><link rel="manifest" href="/favicons/manifest.json"><link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5"><meta name="theme-color" content="#ffffff"><meta name="description" content="Mokit最初编写于2012年，是一个面向移动应用的前端mvc框架，v3版本进行了大量的重构或重写，并尽可能的保持了和之前版本类似的API，v3是一个「极轻量」的MVVM框架，相较目前主流的类似的框架(react/vue/angular)，mokitv3更"><meta name="keywords" content=""><title>一个 MVC 框架以 MVVM 之「魂」复活了！ · Houfeng's Blog</title><link rel="icon" href="/favicons/favicon.ico"><link rel="canonical" href="http://blog.houfeng.net/2016/12/06/mokit/"><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><link rel="stylesheet" href="/css/style.css"><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3F16290d6dfe4977c6ba2d32fb7a483731";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script></head><body><div style="display:none;"><img src="/favicons/300x300.png"></div><div id="main"><header><a href="/." class="logo">Houfeng's Blog</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li><li class="nav-link"><a href="/about/" target="_self">About</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">一个 MVC 框架以 MVVM 之「魂」复活了！</h1><span class="post-time">Dec 6, 2016</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Contents</h3><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#相较-v2-主要变化"><span class="toc-text">相较 v2 主要变化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#特性"><span class="toc-text">特性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Hello-世界"><span class="toc-text">Hello 世界</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#定义组件"><span class="toc-text">定义组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#在线示例"><span class="toc-text">在线示例</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#规划"><span class="toc-text">规划</span></a></div><div class="post-content"><p>Mokit 最初编写于 2012 年，是一个面向移动应用的前端 mvc 框架，v3 版本进行了大量的重构或重写，并尽可能的保持了和之前版本类似的 API，<br>v3 是一个「极轻量」的 MVVM 框架，相较目前主流的类似的框架(react/vue/angular)，mokit v3 更为「轻量」，希望为开发人员提供多一种的选择。</p>
<a id="more"></a>
<h2 id="相较-v2-主要变化"><a href="#相较-v2-主要变化" class="headerlink" title="相较 v2 主要变化"></a>相较 v2 主要变化</h2><ul>
<li>MVC -&gt; MVVM</li>
<li>原来的 View 类改为 Component，同时取消了 Controller 类</li>
<li>options 选项改为 properties，并支持计算属性</li>
<li>onRender 生命周期函数改为 onReady</li>
<li>新增支持 data 选项</li>
<li>新增支持 watches 选项</li>
<li>分拆 template 选项功能，不再自动检查是否为 Element，同时新增 element 选项</li>
<li>指令默认前缀由 <strong>data-</strong> 改为 <strong>m:</strong>，同时支持自定义指令</li>
</ul>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul>
<li>面向移动设备，内置支持常用「手势事件」并可以轻松添加自定义事件。  </li>
<li>极其轻量「核心 + 手势 API + Router」仅 <strong>13k</strong> (uglify+gzip)  </li>
<li>提供类 WebCompoents 的支持，并支持「组件继承」  </li>
</ul>
<h1 id="Hello-世界"><a href="#Hello-世界" class="headerlink" title="Hello 世界"></a>Hello 世界</h1><p>HTML:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">m:model</span>=<span class="string">"name"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">m:on:tap</span>=<span class="string">"say(name)"</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>JavaScript:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//启动应用</span></div><div class="line">mokit(&#123;</div><div class="line">  element: <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>),</div><div class="line">  data:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      name: <span class="string">'世界'</span></div><div class="line">    &#125;;</div><div class="line">  &#125;,</div><div class="line">  say: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">    alert(<span class="string">'hello '</span>+ name);</div><div class="line">  &#125;</div><div class="line">&#125;).start();</div></pre></td></tr></table></figure>
<h1 id="定义组件"><a href="#定义组件" class="headerlink" title="定义组件"></a>定义组件</h1><p>编写组件:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//定义一个 hello 组件</span></div><div class="line"><span class="keyword">var</span> Hello = <span class="keyword">new</span> mokit.Component(&#123;</div><div class="line">  template: <span class="string">'&lt;button m:on:tap="say(name)" m:content&gt;&lt;/button&gt;'</span>,</div><div class="line">  properties: &#123; name: <span class="literal">null</span>&#125;,</div><div class="line">  say: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">    alert(<span class="string">'hello '</span>+ name);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>HTML:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">m:hello</span> <span class="attr">m:prop:name</span>=<span class="string">"name"</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">m:hello</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>JavaScript:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//启动应用</span></div><div class="line">mokit(&#123;</div><div class="line">  element: <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>),</div><div class="line">  components:&#123; Hello: Hello &#125;</div><div class="line">  data:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      name: <span class="string">'世界'</span></div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;).start();</div></pre></td></tr></table></figure>
<h1 id="在线示例"><a href="#在线示例" class="headerlink" title="在线示例"></a>在线示例</h1><ul>
<li><a href="http://houfeng.net/mokit/examples/todo" target="_blank" rel="external">Todo</a></li>
<li><a href="http://houfeng.net/mokit/examples/route" target="_blank" rel="external">Route</a></li>
<li><a href="http://houfeng.net/mokit/examples/transition" target="_blank" rel="external">Transition</a></li>
</ul>
<h1 id="规划"><a href="#规划" class="headerlink" title="规划"></a>规划</h1><ul>
<li>支持服务端渲染</li>
</ul>
</div></article><div class="tags"></div><div class="paginator"><a href="/2016/10/15/oneport/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div><section id="comments"><div data-thread-key="http://blog.houfeng.net/2016/12/06/mokit/index.html" data-title="一个 MVC 框架以 MVVM 之「魂」复活了！" data-url="http://blog.houfeng.net/2016/12/06/mokit/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "houfeng" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section></section><footer><div class="copyright"><p class="power">Powered by <a href="https://hexo.io/">Hexo</a> and Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p><p class="since">&copy;2009-2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Houfeng</span></p></div><label id="back2top"><i class="iconfont icon-up"></i></label></footer></div><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></body></html>